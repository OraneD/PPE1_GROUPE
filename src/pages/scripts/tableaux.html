<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title> PPE1 - Scripts</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <link rel="stylesheet" href="../../css/main.css">
    <script src="https://kit.fontawesome.com/ec3c0779e7.js" crossorigin="anonymous"></script>
</head>

<body background> 
    <section class="hero has-background-black">
        <div class="hero-body"></div>
        <div class="container has-text-centered">
        <h1 class="title is-1 has-text-primary-light">Projet Personnel Encadré</h1>
        <h2 class="subtitle is-3 has-text-primary-light">M1 - TAL</h2>
    </div>
    </div>
    <div class="block has-background-black"></div>
        <nav>
            <ul>
                <li> <a href="../../../index.html">
                    <span>Accueil</span>
                    </a>
                </li>
                <li><a href="../methode.html">
                <span>Méthode</span>
            </a>
        </li>
        <li class="deroulant"><a>Scripts</a>
            <ul class="sous">
                <li><a href="tableaux.html">Tableaux</a></li>
                <li><a href="concordancier.html">Concordancier</a></li>
                <li><a href="itrameur.html".html">iTrameur</a></li>
                
            </ul>
        
        </li>
                <li class="deroulant"><a>Tableaux</a>
                <ul class="sous">
                    <li><a href="../../../URL_fr/tableau_FR.html">Français Geek</a></li>
                    <li><a href="../../../URL_fr/Tableau_nerd_FR.html">Français Nerd</a></li>
                    <li><a href="../../../URL_anglais/tableaux/tableau_Geek_anglais.html">Anglais Geek</a></li>
                    <li><a href="../../../URL_anglais/tableaux/tableau_Nerd_anglais.html">Anglais Nerd</a></li>
                    <li><a href="../../../URL_serbe/tableau_geek_rs.html">Serbe Geek</a></li>
                    <li><a href="../../../URL_serbe/tableau_nerd_rs.html">Serbe Nerd</a></li>
                    
                </ul>
            
            </li>
            <li class="deroulant"><a>Analyse</a>
                <ul class="sous">
                    <li><a href="../analyse/analyse_FR.html">Français</a></li>
                    <li><a href="../analyse/analyse_EN.html">Anglais</a></li>
                    <li><a href="../analyse/analyse_SR.html">Serbe</a></li>
                    <li><a href="../analyse/conclusion.html">Conclusion</a></li>
                    
                </ul>
            
            </li>
                <li><a href="../nuages_de_mots.html">
                    <span>Nuages de Mots</span>
                </a>
            </li>
            </ul>
        </nav>
    </div>
    
    <section class="section has-background-primary-light">
        <div class="container has-text-centered">
        	<div class="title is-3"> Scripts tableaux</div>
        </div>
        <div class="has-text-justified">
            <br>
            <p>Afin de générer un corpus sous forme de tableau, nous avons executé un script en Bash. Ainsi, nos scripts créent un tableaux avec les colonnes/données suivantes:</p>
            <br>    
                <ul>
                    <li>- le numéro de la ligne pour chaque URL</li>
                    <li>- le code HTTP</li>
                    <li>- l'encodage du texte</li>
                    <li>- le fichier dump en html</li>
                    <li>- le fichier dump en txt</li>
                    <li>- le nombre d'occurrences du mot choisi pour chaque URL</li>
                    <li>- le contexte gauche et droit du mot</li>
                    <li>- le concordancier avec les cooccurrences du mot</li>
                </ul>
            <br>
            <p>Pour lancer le script, deux fichiers sont nécessaires : le fichier .txt avec la liste des URL et le fichier .html où le résultat sera stocké.</p>
            <br>
            <p>Nous avons travaillé sur deux mots à la fois ("geek" et "nerd"). Léa et Valentina ont décidé de créer deux scripts où la seule différence est dans la variable "mot". Cette variable contient une expression régulière correspondante aux mots que l'on cherche. Ce choix a été fait pour faciliter l'exécution lorsque les scripts ont été testés. </p>
            <p>En revanche, Orane a trouvé plus pratique de garder un seul script et de changer la variable mot en fonction du tableaux qu'elle voulait obtenir.</p>
            <br>
            <p>Sur cette page, vous trouverez nos 5 scripts : </p>
        </div>
    </section>
    <section class="section has-background-primary-light">
    <style>
        div.scrollable {
            overflow: scroll;
            height: 700px; /* Set the height of the element */
        }
    </style>
    <div class="title is-5">Script français "geek" et "nerd"</div>
    <a href="../../../URL_fr/Scripts/script_termine.sh">Cliquez pour télécharger le script ci-dessous</a>
    <div class="scrollable section has-background-warning-light">
        <p>#!/usr/bin/env bash</p>
        <br>
        <p>#==================================================================================</p>
        <p># Ce script va traiter la liste des URL (format texte) et etre redirigé en tableau (format HTML)</p>
        <p># Le tableau contiendra :</p>
        <p># -le numéro de la ligne pour chaque URL,</p>
        <p># -le code</p>
        <p>#-l'encodage de la page (on va convertir les pages qui ne sont pas encodées en UTF-8)</p>
        <p># -l'URL</p>
        <p># -le fichier dump en html</p>
        <p># -le fichier dump en txt</p>
        <p># -le nombre d'occurrences du mot choisi pour chaque URL</p>
        <p># -le contexte gauche et droit du mot</p>
        <p># -le concordancier avec les cooccurrences du mot</p>
        <p># Pour lancer le script:</p>
        <p># bash nom_du_script.sh fichier_url.txt fichier_tableau.html</p>
        <p>#==================================================================================</p>
        <br>
        <p>fichier_urls=$1 # le fichier d'URL en entrée</p>
        <p>fichier_tableau=$2 # le fichier HTML en sortie</p>
        <br>
        <p>if [[ $# -ne 2 ]]</p>
        <p>then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;echo "Ce programme demande exactement deux arguments."</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;exit</p>
        <p>fi</p>
        <p>mot="[Nn]erds?"</p>
        <br>
        <p>#-------------------------Génération du tableau----------------------------#</p>
        <br>
        <br>
        <p>echo $fichier_urls;</p>
        <p>basename=$(basename -s .txt $fichier_urls)</p>
        <br>
        <p>echo "&lt;html&gt;&lt;head&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta charset = "utf-8"/&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt; tableau URL &lt;/title&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta name ="viewport" content="width=device-width, initial-scale=1"&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;" &gt; $fichier_tableau</p>
        <p>echo "&lt;h2&gt;Tableau $basename :&lt;/h2&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;br/&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;table class=\&quot;table is-bordered is-hoverable is-stripped\&quot;&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;tr&gt;&lt;th&gt;ligne&lt;/th&gt;&lt;th&gt;code&lt;/th&gt;&lt;th&gt;URL&lt;/th&gt;&lt;th&gt;encodage&lt;/th&gt;&lt;th&gt;dump html&lt;/th&gt;&lt;th&gt;dump text&lt;/th&gt;&lt;th&gt;occurrences&lt;/th&gt;&lt;th&gt;contextes&lt;/th&gt;&lt;th&gt;concordances&lt;/th&gt;&lt;/tr&gt;" &gt;&gt; $fichier_tableau</p>
        <br>
        <p>#------------------------------Condition pour remplir le tableau--------------------------#</p>
        <br>
        <p>lineno=1;</p>
        <p>while read -r URL; do</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tURL : $URL";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# la façon attendue, sans l'option -w de cURL</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code=$(curl -ILs $URL | grep -e "^HTTP/" | grep -Eo "[0-9]{3}" | tail -n 1)</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=$(curl -Ls $URL -D - -o "./aspirations/$basename-$lineno.html" | grep -Eo "charset=(\w|-)+" | cut -d= -f2)</p>
        <br>
        <p>echo -e "\tcode : $code";</p>
        <br>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ ! $charset ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tencodage non détecté, on prendra UTF-8 par défaut.";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset="UTF-8";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tencodage : $charset";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
        <br>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ $code -eq 200 ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=$(lynx -dump -nolist -assume_charset=$charset -display_charset=$charset $URL)</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ $charset -ne "UTF-8" && -n "$dump" ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=$(echo $dump | iconv -f $charset -t "UTF-8//IGNORE")</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
	    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tcode différent de 200 utilisation d'un dump vide"</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=""</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=""</p>
	    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
        <p>echo "$dump" > "./dumps-text/$basename-$lineno.txt"</p>
        <br>
        <p>#pour compter le nombre d'occurrences</p>
        <p>NB_OCC=$(grep -E -o $mot ./dumps-text/$basename-$lineno.txt | wc -l)</p>
        <br>
        <p>#pour extraire des contextes A=after, B=before (droite et gauche)</p>
        <p>grep -P -B2 -A2 $mot ./dumps-text/$basename-$lineno.txt > ./contextes/$basename-$lineno.txt</p>
        <br>
        <p>#pour construire des concordanciers avec cooccurrences depuis une commande externe</p>
        <p>bash ./concordance.sh ./dumps-text/$basename-$lineno.txt $mot > ./concordances/$basename-$lineno.html</p>
        <br>
        <p>#--------------------------------------Ajout dans le tableau ------------------------------------#</p>
        <br>
        <p>echo "&lt;tr&gt;&lt;td&gt;$lineno&lt;/td&gt;&lt;td&gt;$code&lt;/td&gt;&lt;td&gt;$encodage&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;$URL&quot;&gt;$URL&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./aspirations/fich-$lineno.html&quot;&gt;html&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./dumps-text/$basename-$lineno.txt&quot;&gt;txt&lt;/a&gt;&lt;/td&gt;&lt;td&gt;$NB_OCC&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./contextes/$basename-$lineno.txt&quot;&gt;contextes&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./concordances/$basename-$lineno.html&quot;&gt;concordance&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;" >> $fichier_tableau</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\t--------------------------------"</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineno=$((lineno+1));</p>
        <p>done &lt; $fichier_urls</p>
        <br>
        <p>#---------------------------------------Fermeture du tableau-------------------------------------#
        <br>
        <p>echo "&lt;/table&gt;" >> $fichier_tableau</p>
        <p>echo "&lt;/body&gt;&lt;/html&gt;" >> $fichier_tableau</p>

    </div>
    </section>
    <section class="section has-background-primary-light">
    <style>
        div.scrollable {
            overflow: scroll;
            height: 700px; /* Set the height of the element */
        }
    </style>
    <div class="title is-5">Script anglais "geek"</div>
    <a href="../../../URL_anglais/script_urls_geek_fini.sh">Cliquez pour télécharger le script ci-dessous</a>
    <div class="scrollable section has-background-warning-light">
        <p>#!/usr/bin/env bash</p>
        <br>
        <p>#==================================================================================</p>
        <p># Ce script va traiter la liste des URL (format texte) et etre redirigé en tableau (format HTML)</p>
        <p># Le tableau contiendra :</p>
        <p># -le numéro de la ligne pour chaque URL,</p>
        <p># -le code</p>
        <p>#-l'encodage de la page (on va convertir les pages qui ne sont pas encodées en UTF-8)</p>
        <p># -l'URL</p>
        <p># -le fichier dump en html</p>
        <p># -le fichier dump en txt</p>
        <p># -le nombre d'occurrences du mot choisi pour chaque URL</p>
        <p># -le contexte gauche et droit du mot</p>
        <p># -le concordancier avec les cooccurrences du mot</p>
        <p># Pour lancer le script:</p>
        <p># bash nom_du_script.sh fichier_url.txt fichier_tableau.html</p>
        <p>#==================================================================================</p>
        <br>
        <p>fichier_urls=$1 # le fichier d'URL en entrée</p>
        <p>fichier_tableau=$2 # le fichier HTML en sortie</p>
        <br>
        <p>if [[ $# -ne 2 ]]</p>
        <p>then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;echo "Ce programme demande exactement deux arguments."</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;exit</p>
        <p>fi</p>
        <p>mot="[Gg]eek(dom|s|[Mm]om|[Dd]ad)?"</p>
        <br>
        <p>echo $fichier_urls;</p>
        <p>basename=$(basename -s .txt $fichier_urls)</p>
        <br>
        <p>echo "&lt;html&gt;&lt;head&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta charset = "utf-8"/&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt; tableau URL &lt;/title&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta name ="viewport" content="width=device-width, initial-scale=1"&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;" &gt; $fichier_tableau</p>
        <p>echo "&lt;h2&gt;Tableau $basename :&lt;/h2&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;br/&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;table class=\&quot;table is-bordered is-hoverable is-stripped\&quot;&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;tr&gt;&lt;th&gt;ligne&lt;/th&gt;&lt;th&gt;code&lt;/th&gt;&lt;th&gt;encodage&lt;/th&gt;&lt;th&gt;URL&lt;/th&gt;&lt;th&gt;dump html&lt;/th&gt;&lt;th&gt;dump text&lt;/th&gt;&lt;th&gt;occurrences&lt;/th&gt;&lt;th&gt;contextes&lt;/th&gt;&lt;th&gt;concordances&lt;/th&gt;&lt;/tr&gt;" &gt;&gt; $fichier_tableau</p>
        <br>
        <p>lineno=1;</p>
        <p>while read -r URL; do</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tURL : $URL";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# la façon attendue, sans l'option -w de cURL</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code=$(curl -ILs $URL | grep -e "^HTTP/" | grep -Eo "[0-9]{3}" | tail -n 1)</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encodage=$(curl -Ls $URL -D - -o "./aspirations/$basename-$lineno.html" | grep -Eo "charset=(\w|-)+" | cut -d= -f2 | tail -n 1)</p>
        <br>
        <p>echo -e "\tcode : $code";</p>
        <br>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ ! $encodage ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tencodage non détecté, on prendra UTF-8 par défaut.";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encodage="UTF-8";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tencodage : $encodage";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
        <br>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ $code -eq 200 ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=$(lynx -dump -nolist -assume_charset=$encodage -display_charset=$encodage $URL)</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo $encodage</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ $encodage -ne "UTF-8" && -n "$dump" ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=$(echo $dump | iconv -f $encodage -t "UTF-8//IGNORE")</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
	    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tcode différent de 200 utilisation d'un dump vide"</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=""</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encodage=""</p>
	    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
        <p>echo "$dump" > "./dumps-text/$basename-$lineno.txt"</p>
        <br>
        <p>#on va maintenant compter le nombre d'occurrences</p>
        <p>NB_OCC=$(grep -E -o $mot ./dumps-text/$basename-$lineno.txt | wc -l)</p>
        <br>
        <p>extraction des contextes A=after, B=before (droite + gauche)</p>
        <p>grep -E -B2 -A2 $mot ./dumps-text/$basename-$lineno.txt > ./contextes/$basename-$lineno.txt</p>
        <br>
        <p>#construction des concordanciers avec des cooccurrences via un appel d'un autre script</p>
        <p>bash ./concordance.sh ./dumps-text/$basename-$lineno.txt $mot > ./concordances/$basename-$lineno.html</p>
        <br>
        <p>#fin du tableau</p>
        <p>echo "&lt;tr&gt;&lt;td&gt;$lineno&lt;/td&gt;&lt;td&gt;$code&lt;/td&gt;&lt;td&gt;$encodage&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;$URL&quot;&gt;$URL&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./aspirations/fich-$lineno.html&quot;&gt;html&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./dumps-text/$basename-$lineno.txt&quot;&gt;txt&lt;/a&gt;&lt;/td&gt;&lt;td&gt;$NB_OCC&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./contextes/$basename-$lineno.txt&quot;&gt;contextes&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./concordances/$basename-$lineno.html&quot;&gt;concordance&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;" >> $fichier_tableau</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\t--------------------------------"</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineno=$((lineno+1));</p>
        <p>done &lt; $fichier_urls</p>
        <p>echo "&lt;/table&gt;" >> $fichier_tableau</p>
        <p>echo "&lt;/body&gt;&lt;/html&gt;" >> $fichier_tableau</p>


    </div>
    </section>
    <section class="section has-background-primary-light">
    <style>
        div.scrollable {
            overflow: scroll;
            height: 700px; /* Set the height of the element */
        }
    </style>
    <div class="title is-5">Script anglais "nerd"</div>
    <a href="../../../URL_anglais/script_urls_nerd_fini.sh">Cliquez pour télécharger le script ci-dessous</a>
    <div class="scrollable section has-background-warning-light">
        <p>#!/usr/bin/env bash</p>
        <br>
        <p>#==================================================================================</p>
        <p># Ce script va traiter la liste des URL (format texte) et etre redirigé en tableau (format HTML)</p>
        <p># Le tableau contiendra :</p>
        <p># -le numéro de la ligne pour chaque URL,</p>
        <p># -le code</p>
        <p>#-l'encodage de la page (on va convertir les pages qui ne sont pas encodées en UTF-8)</p>
        <p># -l'URL</p>
        <p># -le fichier dump en html</p>
        <p># -le fichier dump en txt</p>
        <p># -le nombre d'occurrences du mot choisi pour chaque URL</p>
        <p># -le contexte gauche et droit du mot</p>
        <p># -le concordancier avec les cooccurrences du mot</p>
        <p># Pour lancer le script:</p>
        <p># bash nom_du_script.sh fichier_url.txt fichier_tableau.html</p>
        <p>#==================================================================================</p>
        <br>
        <p>fichier_urls=$1 # le fichier d'URL en entrée</p>
        <p>fichier_tableau=$2 # le fichier HTML en sortie</p>
        <br>
        <p>if [[ $# -ne 2 ]]</p>
        <p>then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;echo "Ce programme demande exactement deux arguments."</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;exit</p>
        <p>fi</p>
        <p>mot="[Nn]erd(dom|s)?"</p>
        <br>
        <p>echo $fichier_urls;</p>
        <p>basename=$(basename -s .txt $fichier_urls)</p>
        <br>
        <p>echo "&lt;html&gt;&lt;head&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta charset = "utf-8"/&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt; tableau URL &lt;/title&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta name ="viewport" content="width=device-width, initial-scale=1"&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;" &gt; $fichier_tableau</p>
        <p>echo "&lt;h2&gt;Tableau $basename :&lt;/h2&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;br/&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;table class=\&quot;table is-bordered is-hoverable is-stripped\&quot;&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;tr&gt;&lt;th&gt;ligne&lt;/th&gt;&lt;th&gt;code&lt;/th&gt;&lt;th&gt;encodage&lt;/th&gt;&lt;th&gt;URL&lt;/th&gt;&lt;th&gt;dump html&lt;/th&gt;&lt;th&gt;dump text&lt;/th&gt;&lt;th&gt;occurrences&lt;/th&gt;&lt;th&gt;contextes&lt;/th&gt;&lt;th&gt;concordances&lt;/th&gt;&lt;/tr&gt;" &gt;&gt; $fichier_tableau</p>
        <br>
        <p>lineno=1;</p>
        <p>while read -r URL; do</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tURL : $URL";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# la façon attendue, sans l'option -w de cURL</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code=$(curl -ILs $URL | grep -e "^HTTP/" | grep -Eo "[0-9]{3}" | tail -n 1)</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encodage=$(curl -Ls $URL -D - -o "./aspirations/$basename-$lineno.html" | grep -Eo "charset=(\w|-)+" | cut -d= -f2 | tail -n 1)</p>
        <br>
        <p>echo -e "\tcode : $code";</p>
        <br>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ ! $encodage ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tencodage non détecté, on prendra UTF-8 par défaut.";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encodage="UTF-8";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tencodage : $encodage";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
        <br>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ $code -eq 200 ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=$(lynx -dump -nolist -assume_charset=$encodage -display_charset=$encodage $URL)</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo $encodage</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ $encodage -ne "UTF-8" && -n "$dump" ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=$(echo $dump | iconv -f $encodage -t "UTF-8//IGNORE")</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
	    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tcode différent de 200 utilisation d'un dump vide"</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=""</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encodage=""</p>
	    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
        <p>echo "$dump" > "./dumps-text/$basename-$lineno.txt"</p>
        <br>
        <p>#on va maintenant compter le nombre d'occurrences</p>
        <p>NB_OCC=$(grep -E -o $mot ./dumps-text/$basename-$lineno.txt | wc -l)</p>
        <br>
        <p>extraction des contextes A=after, B=before (droite + gauche)</p>
        <p>grep -E -B2 -A2 $mot ./dumps-text/$basename-$lineno.txt > ./contextes/$basename-$lineno.txt</p>
        <br>
        <p>#construction des concordanciers avec des cooccurrences via un appel d'un autre script</p>
        <p>bash ./concordance.sh ./dumps-text/$basename-$lineno.txt $mot > ./concordances/$basename-$lineno.html</p>
        <br>
        <p>#fin du tableau</p>
        <p>echo "&lt;tr&gt;&lt;td&gt;$lineno&lt;/td&gt;&lt;td&gt;$code&lt;/td&gt;&lt;td&gt;$encodage&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;$URL&quot;&gt;$URL&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./aspirations/fich-$lineno.html&quot;&gt;html&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./dumps-text/$basename-$lineno.txt&quot;&gt;txt&lt;/a&gt;&lt;/td&gt;&lt;td&gt;$NB_OCC&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./contextes/$basename-$lineno.txt&quot;&gt;contextes&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./concordances/$basename-$lineno.html&quot;&gt;concordance&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;" >> $fichier_tableau</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\t--------------------------------"</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineno=$((lineno+1));</p>
        <p>done &lt; $fichier_urls</p>
        <p>echo "&lt;/table&gt;" >> $fichier_tableau</p>
        <p>echo "&lt;/body&gt;&lt;/html&gt;" >> $fichier_tableau</p>

    </div>
    </section>
    <section class="section has-background-primary-light">
    <style>
        div.scrollable {
            overflow: scroll;
            height: 700px; /* Set the height of the element */
        }
    </style>
    <div class="title is-5">Script serbe "gik" ("geek")</div>
    <a href="../../../URL_serbe/script_projet_base_geek_rs.sh">Cliquez pour télécharger le script ci-dessous</a>
    <div class="scrollable section has-background-warning-light">
        <p>#!/usr/bin/env bash</p>
        <br>
        <p>#==================================================================================</p>
        <p># Ce script va traiter la liste des URL (format texte) et etre redirigé en tableau (format HTML)</p>
        <p># Le tableau contiendra :</p>
        <p># -le numéro de la ligne pour chaque URL,</p>
        <p># -le code</p>
        <p>#-l'encodage de la page (on va convertir les pages qui ne sont pas encodées en UTF-8)</p>
        <p># -l'URL</p>
        <p># -le fichier dump en html</p>
        <p># -le fichier dump en txt</p>
        <p># -le nombre d'occurrences du mot choisi pour chaque URL</p>
        <p># -le contexte gauche et droit du mot</p>
        <p># -le concordancier avec les cooccurrences du mot</p>
        <p># Pour lancer le script:</p>
        <p># bash nom_du_script.sh fichier_url.txt fichier_tableau.html</p>
        <p>#==================================================================================</p>
        <br>
        <p>fichier_urls=$1 # le fichier d'URL en entrée</p>
        <p>fichier_tableau=$2 # le fichier HTML en sortie</p>
        <br>
        <p>if [[ $# -ne 2 ]]</p>
        <p>then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;echo "Ce programme demande exactement deux arguments."</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;exit</p>
        <p>fi</p>
        <br>
        <p>mot"[Gg]ik(a|u|ovi|e|ovima|ova|uša|ušu|uši|ušama|uše)?|[Gg]eek(ovi|ove|ovima|ova)?" # différentes formes du mot (genre/nombre/les cas + écriture emprunté )</p>
        <br>
        <p># ==== créer le tableau ====</p>
        <br>
        <p>echo $fichier_urls;</p>
        <p>basename=$(basename -s .txt $fichier_urls)</p>
        <br>
        <p>echo "&lt;html&gt;&lt;head&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta charset = "UTF-8"/&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt; tableau URL (geek-rs) &lt;/title&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta name ="viewport" content="width=device-width, initial-scale=1"&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;" &gt; $fichier_tableau</p>
        <p>echo "&lt;h2 class=title is-2" &gt;Tableau $basename :&lt;/h2&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;br/&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;table class=\&quot;table is-bordered is-hoverable is-stripped\&quot;&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;tr&gt;&lt;th&gt;ligne&lt;/th&gt;&lt;th&gt;code&lt;/th&gt;&lt;th&gt;URL&lt;/th&gt;&lt;th&gt;encodage&lt;/th&gt;&lt;th&gt;dump html&lt;/th&gt;&lt;th&gt;dump text&lt;/th&gt;&lt;th&gt;occurrences&lt;/th&gt;&lt;th&gt;contextes&lt;/th&gt;&lt;th&gt;concordances&lt;/th&gt;&lt;/tr&gt;" &gt;&gt; $fichier_tableau</p>
        <br>
        <p># ==== remplir le tableau ====</p>
        <br>
        <p>lineno=1;</p>
        <p>while read -r URL; do</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tURL : $URL";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# la façon attendue, sans l'option -w de cURL</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code=$(curl -ILs $URL | grep -e "^HTTP/" | grep -Eo "[0-9]{3}" | tail -n 1)</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=$(curl -Ls $URL -D - -o "./aspirations/$basename-$lineno.html" | grep -Eo "charset=(\w|-)+" | cut -d= -f2 | tail -n 1)</p>
        <br>
        <p>echo -e "\tcode : $code";</p>
        <br>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ ! $charset ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tencodage non détecté, on prendra UTF-8 par défaut.";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset="UTF-8";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tencodage : $charset";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
        <br>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ $code -eq 200 ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=$(lynx -dump -nolist -assume_charset=$charset -display_charset=$charset $URL)</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ $charset -ne "UTF-8" && -n "$dump" ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=$(echo $dump | iconv -f $charset -t "UTF-8//IGNORE")</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
	    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tcode différent de 200 utilisation d'un dump vide"</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=""</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=""</p>
	    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
        <p>echo "$dump" > "./dumps-text/$basename-$lineno.txt"</p>
        <br>
        <p>#pour compter le nombre d'occurrences</p>
        <p>NB_OCC=$(grep -E -o $mot ./dumps-text/$basename-$lineno.txt | wc -l)</p>
        <br>
        <p>#pour extraire des contextes A=after, B=before (droite et gauche)</p>
        <p>grep -P -B2 -A2 $mot ./dumps-text/$basename-$lineno.txt > ./contextes/$basename-$lineno.txt</p>
        <br>
        <p>#pour construire des concordanciers avec cooccurrences depuis une commande externe</p>
        <p>bash ./concordance.sh ./dumps-text/$basename-$lineno.txt $mot > ./concordances/$basename-$lineno.html</p>
        <br>
        <p># ==== ajouter dans le tableau ==== </p>
        <br>
        <p>echo "&lt;tr&gt;&lt;td&gt;$lineno&lt;/td&gt;&lt;td&gt;$code&lt;/td&gt;&lt;td&gt;$encodage&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;$URL&quot;&gt;$URL&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./aspirations/fich-$lineno.html&quot;&gt;html&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./dumps-text/$basename-$lineno.txt&quot;&gt;txt&lt;/a&gt;&lt;/td&gt;&lt;td&gt;$NB_OCC&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./contextes/$basename-$lineno.txt&quot;&gt;contextes&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./concordances/$basename-$lineno.html&quot;&gt;concordance&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;" >> $fichier_tableau</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\t--------------------------------"</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineno=$((lineno+1));</p>
        <p>done &lt; $fichier_urls</p>
        <br>
        <p># ==== fermer le tableau ==== </p>
        <br>
        <p>echo "&lt;/table&gt;" >> $fichier_tableau</p>
        <p>echo "&lt;/body&gt;&lt;/html&gt;" >> $fichier_tableau</p>
    </div>
    </section>
    <section class="section has-background-primary-light">
    <style>
        div.scrollable {
            overflow: scroll;
            height: 700px; /* Set the height of the element */
        }
    </style>
    <div class="title is-5">Script serbe "štreber" ("nerd")</div>
    <a href="../../../URL_serbe/script_projet_base_nerd_rs.sh">Cliquez ici pour télécharger le script ci-dessous</a>
    <div class="scrollable section has-background-warning-light">
        <p>#!/usr/bin/env bash</p>
        <br>
        <p>#==================================================================================</p>
        <p># Ce script va traiter la liste des URL (format texte) et etre redirigé en tableau (format HTML)</p>
        <p># Le tableau contiendra :</p>
        <p># -le numéro de la ligne pour chaque URL,</p>
        <p># -le code</p>
        <p>#-l'encodage de la page (on va convertir les pages qui ne sont pas encodées en UTF-8)</p>
        <p># -l'URL</p>
        <p># -le fichier dump en html</p>
        <p># -le fichier dump en txt</p>
        <p># -le nombre d'occurrences du mot choisi pour chaque URL</p>
        <p># -le contexte gauche et droit du mot</p>
        <p># -le concordancier avec les cooccurrences du mot</p>
        <p># Pour lancer le script:</p>
        <p># bash nom_du_script.sh fichier_url.txt fichier_tableau.html</p>
        <p>#==================================================================================</p>
        <br>
        <p>fichier_urls=$1 # le fichier d'URL en entrée</p>
        <p>fichier_tableau=$2 # le fichier HTML en sortie</p>
        <br>
        <p>if [[ $# -ne 2 ]]</p>
        <p>then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;echo "Ce programme demande exactement deux arguments."</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;exit</p>
        <p>fi</p>
        <br>
        <p>mot"[Šš]treber(i|a|u|ima|e|ka|ki|ku|kama|ke)?" # différentes formes du mot (genre/nombre/les cas + écriture emprunté )</p>
        <br>
        <p># ==== créer le tableau ====</p>
        <br>
        <p>echo $fichier_urls;</p>
        <p>basename=$(basename -s .txt $fichier_urls)</p>
        <br>
        <p>echo "&lt;html&gt;&lt;head&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta charset = "UTF-8"/&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt; tableau URL (geek-rs) &lt;/title&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta name ="viewport" content="width=device-width, initial-scale=1"&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"&gt;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;" &gt; $fichier_tableau</p>
        <p>echo "&lt;h2 class=title is-2" &gt;Tableau $basename :&lt;/h2&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;br/&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;table class=\&quot;table is-bordered is-hoverable is-stripped\&quot;&gt;" &gt;&gt; $fichier_tableau</p>
        <p>echo "&lt;tr&gt;&lt;th&gt;ligne&lt;/th&gt;&lt;th&gt;code&lt;/th&gt;&lt;th&gt;URL&lt;/th&gt;&lt;th&gt;encodage&lt;/th&gt;&lt;th&gt;dump html&lt;/th&gt;&lt;th&gt;dump text&lt;/th&gt;&lt;th&gt;occurrences&lt;/th&gt;&lt;th&gt;contextes&lt;/th&gt;&lt;th&gt;concordances&lt;/th&gt;&lt;/tr&gt;" &gt;&gt; $fichier_tableau</p>
        <br>
        <p># ==== remplir le tableau ====</p>
        <br>
        <p>lineno=1;</p>
        <p>while read -r URL; do</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tURL : $URL";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# la façon attendue, sans l'option -w de cURL</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code=$(curl -ILs $URL | grep -e "^HTTP/" | grep -Eo "[0-9]{3}" | tail -n 1)</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=$(curl -Ls $URL -D - -o "./aspirations/$basename-$lineno.html" | grep -Eo "charset=(\w|-)+" | cut -d= -f2 | tail -n 1)</p>
        <br>
        <p>echo -e "\tcode : $code";</p>
        <br>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ ! $charset ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tencodage non détecté, on prendra UTF-8 par défaut.";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset="UTF-8";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tencodage : $charset";</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
        <br>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ $code -eq 200 ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=$(lynx -dump -nolist -assume_charset=$charset -display_charset=$charset $URL)</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if [[ $charset -ne "UTF-8" && -n "$dump" ]]</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=$(echo $dump | iconv -f $charset -t "UTF-8//IGNORE")</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
	    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\tcode différent de 200 utilisation d'un dump vide"</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump=""</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=""</p>
	    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</p>
        <p>echo "$dump" > "./dumps-text/$basename-$lineno.txt"</p>
        <br>
        <p>#pour compter le nombre d'occurrences</p>
        <p>NB_OCC=$(grep -E -o $mot ./dumps-text/$basename-$lineno.txt | wc -l)</p>
        <br>
        <p>#pour extraire des contextes A=after, B=before (droite et gauche)</p>
        <p>grep -P -B2 -A2 $mot ./dumps-text/$basename-$lineno.txt > ./contextes/$basename-$lineno.txt</p>
        <br>
        <p>#pour construire des concordanciers avec cooccurrences depuis une commande externe</p>
        <p>bash ./concordance.sh ./dumps-text/$basename-$lineno.txt $mot > ./concordances/$basename-$lineno.html</p>
        <br>
        <p># ==== ajouter dans le tableau ==== </p>
        <br>
        <p>echo "&lt;tr&gt;&lt;td&gt;$lineno&lt;/td&gt;&lt;td&gt;$code&lt;/td&gt;&lt;td&gt;$encodage&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;$URL&quot;&gt;$URL&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./aspirations/fich-$lineno.html&quot;&gt;html&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./dumps-text/$basename-$lineno.txt&quot;&gt;txt&lt;/a&gt;&lt;/td&gt;&lt;td&gt;$NB_OCC&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./contextes/$basename-$lineno.txt&quot;&gt;contextes&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;./concordances/$basename-$lineno.html&quot;&gt;concordance&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;" >> $fichier_tableau</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -e "\t--------------------------------"</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineno=$((lineno+1));</p>
        <p>done &lt; $fichier_urls</p>
        <br>
        <p># ==== fermer le tableau ==== </p>
        <br>
        <p>echo "&lt;/table&gt;" >> $fichier_tableau</p>
        <p>echo "&lt;/body&gt;&lt;/html&gt;" >> $fichier_tableau</p>

    </div>
    </section>


    
    
 


    <footer class="footer has-background-black">
        <div class="content has-text-centered">
          <p>
             Projet réalisé par
            <a href="https://github.com/OraneD">Orane Dufour</a>
            <a href="https://github.com/LeaMondoloni/PPE1"> Léa Mondoloni</a>
            <a href="https://github.com/valentinaosetrov/PPE1"> Valentina Osetrov</a>
            . Cette page internet a été créée à l'aide du framework 
            <a href="https://bulma.io/">BULMA</a>.
          </p>
        </div>
    </footer>
    </body>
    
    
    
    
    
    
    
    
    </html>